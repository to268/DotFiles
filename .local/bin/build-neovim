#!/usr/bin/env bash

neovim_source="$HOME/files/Dev/repos/neovim"
neovim_path="/usr/local/neovim"
llvm_path="/usr/local/llvm/bin"
build_flags="-DCMAKE_C_COMPILER=$llvm_path/clang"

cp -r $neovim_source $HOME
sudo rm -rf /usr/local/neovim
cd $HOME/neovim

make CMAKE_EXTRA_FLAGS="$build_flags" DEPS_CMAKE_FLAGS="$build_flags" \
CMAKE_BUILD_TYPE=RelWithDebInfo CMAKE_INSTALL_PREFIX=$neovim_path

sudo make install

cd ..
rm -rf $HOME/neovim
